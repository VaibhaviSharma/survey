<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marketing Research Project Survey</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .question {
      margin-bottom: 20px;
    }
    .hidden {
      display: none;
    }
    button {
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>

  <h1>Marketing Research Project Survey</h1>

  <form name="marketing-survey" method="POST" data-netlify="true">
    <!-- Hidden inputs for dynamic data -->
    <div id="hiddenFields"></div>

    <!-- Basic Information -->
    <div class="question" id="step1">
      <label for="name">Name:</label><br>
      <input type="text" id="name" name="name" placeholder="Enter your name" required><br><br>

      <label for="age">Age:</label><br>
      <input type="number" id="age" name="age" placeholder="Enter your age" required><br><br>

      <label for="pronouns">Pronouns (optional):</label><br>
      <input type="text" id="pronouns" name="pronouns" placeholder="e.g., she/her, he/him, they/them"><br><br>

      <button type="button" onclick="goToStep('step1', 'step2')">Next</button>
    </div>

    <!-- Selected Platforms -->
    <div class="question hidden" id="step2">
      <label>Do you use digital platforms? Select all that apply:</label><br>
      <input type="checkbox" id="amazon" name="platforms" value="Amazon Prime"> Amazon Prime<br>
      <input type="checkbox" id="netflix" name="platforms" value="Netflix"> Netflix<br>
      <input type="checkbox" id="disney" name="platforms" value="Disney+"> Disney+<br>
      <input type="checkbox" id="appletv" name="platforms" value="Apple TV+"> Apple TV+<br>
      <input type="checkbox" id="hulu" name="platforms" value="Hulu"> Hulu<br>
      <input type="checkbox" id="hbo" name="platforms" value="HBO Max"> HBO Max<br>
      <input type="checkbox" id="crunchyroll" name="platforms" value="Crunchyroll"> Crunchyroll<br>
      <input type="checkbox" id="tubi" name="platforms" value="Tubi"> Tubi<br>
      <input type="checkbox" id="paramount" name="platforms" value="Paramount"> Paramount<br>
      <input type="checkbox" id="peacock" name="platforms" value="Peacock"> Peacock<br>
      <input type="checkbox" id="espn" name="platforms" value="ESPN+"> ESPN+<br><br>

      <button type="button" onclick="showSelectedPlatformQuestions()">Next</button>
    </div>

    <!-- Questions for Selected Platforms -->
    <div class="question hidden" id="step3">
      <label>For the platforms you selected, answer the following:</label><br>
      <div id="selectedPlatformQuestions"></div>
      <label>Which platforms do you pay for? (Do not include shared accounts.)</label><br>
      <div id="paidPlatforms"></div>
      <button type="button" onclick="showUnselectedPlatformQuestions()">Next</button>
    </div>

    <!-- Questions for Not Selected Platforms -->
    <div class="question hidden" id="step4">
      <label>For the platforms you did not select, what are the reasons? Select all that apply:</label><br>
      <div id="unselectedPlatformQuestions"></div>
      <button type="button" onclick="goToStep('step4', 'step5')">Next</button>
    </div>

    <!-- Final Step -->
    <div class="question hidden" id="step5">
      <label>If a pay-per-use service was available for all digital platforms in the US, would you opt for it?</label><br>
      <label><input type="radio" name="payPerUser" value="YES" required> YES</label><br>
      <label><input type="radio" name="payPerUser" value="NO" required> NO</label><br><br>

      <button type="submit">Submit</button>
    </div>
  </form>

  <script>
    function goToStep(currentStep, nextStep) {
      document.getElementById(currentStep).classList.add("hidden");
      document.getElementById(nextStep).classList.remove("hidden");
    }

    function showSelectedPlatformQuestions() {
      const selectedPlatforms = [];
      document.querySelectorAll('input[name="platforms"]:checked').forEach(checkbox => {
        selectedPlatforms.push(checkbox.value);
      });

      const selectedDiv = document.getElementById("selectedPlatformQuestions");
      const paidDiv = document.getElementById("paidPlatforms");
      selectedDiv.innerHTML = '';
      paidDiv.innerHTML = '';

      selectedPlatforms.forEach(platform => {
        const div = document.createElement("div");
        div.innerHTML = `
          <h3>${platform}</h3>
          <label>Movies watched monthly:</label>
          <select name="${platform}_movies">
            <option value="0">0</option>
            <option value="1-2">1-2</option>
            <option value="3+">3+</option>
          </select><br><br>

          <label>TV shows watched monthly:</label>
          <select name="${platform}_tvShows">
            <option value="0">0</option>
            <option value="1-2">1-2</option>
            <option value="3+">3+</option>
          </select><br><br>
        `;
        selectedDiv.appendChild(div);

        const paidCheckbox = document.createElement("div");
        paidCheckbox.innerHTML = `
          <input type="checkbox" name="paidPlatforms" value="${platform}"> ${platform}<br>
        `;
        paidDiv.appendChild(paidCheckbox);
      });

      // Add selected platforms to hidden fields
      const hiddenFields = document.getElementById("hiddenFields");
      hiddenFields.innerHTML = '';
      selectedPlatforms.forEach(platform => {
        const input = document.createElement("input");
        input.type = "hidden";
        input.name = "selectedPlatforms[]";
        input.value = platform;
        hiddenFields.appendChild(input);
      });

      goToStep('step2', 'step3');
    }

    function showUnselectedPlatformQuestions() {
      const allPlatforms = [
        "Amazon Prime", "Netflix", "Disney+", "Apple TV+", "Hulu",
        "HBO Max", "Crunchyroll", "Tubi", "Paramount", "Peacock", "ESPN+"
      ];

      const selectedPlatforms = [];
      document.querySelectorAll('input[name="platforms"]:checked').forEach(checkbox => {
        selectedPlatforms.push(checkbox.value);
      });

      const unselectedPlatforms = allPlatforms.filter(
        platform => !selectedPlatforms.includes(platform)
      );

      const unselectedDiv = document.getElementById("unselectedPlatformQuestions");
      unselectedDiv.innerHTML = '';

      unselectedPlatforms.forEach(platform => {
        const div = document.createElement("div");
        div.innerHTML = `
          <h3>${platform}</h3>
          <label>Select all that apply:</label><br>
          <input type="checkbox" name="${platform}_reason" value="Content is not interesting"> Content is not interesting<br>
          <input type="checkbox" name="${platform}_reason" value="Not willing to pay"> Not willing to pay<br>
          <input type="checkbox" name="${platform}_reason" value="Do not have time"> Do not have time<br>
          <input type="checkbox" name="${platform}_reason" value="Screen time"> Screen time<br>
          <label>Other:</label> <input type="text" name="${platform}_reason_other" placeholder="Please specify"><br><br>
        `;
        unselectedDiv.appendChild(div);
      });

      goToStep('step3', 'step4');
    }
  </script>

</body>
</html>
